(this["webpackJsonpbike-stations-challenge"]=this["webpackJsonpbike-stations-challenge"]||[]).push([[0],{17:function(t,a,e){},62:function(t,a,e){},63:function(t,a,e){"use strict";e.r(a);var n,s=e(0),i=e(6),o=e.n(i),r=e(3),c=e(26),l=e(11),u=e(29),h=e(5),p=e(7),d=e(8),f=e(13),b=e(12),m=(e(17),e(4)),j=e.n(m),y=e(9),_=e(10),v=e.n(_);!function(t){t[t.fetchStationInformation=0]="fetchStationInformation",t[t.fetchStationStatus=1]="fetchStationStatus"}(n||(n={}));var O=e(1),S=function(t){Object(f.a)(e,t);var a=Object(b.a)(e);function e(){return Object(p.a)(this,e),a.apply(this,arguments)}return Object(d.a)(e,[{key:"renderBikeClass",value:function(){return 0===this.props.station.num_bikes_available?"red":1===this.props.station.num_bikes_available?"orange":"green"}},{key:"renderDockClass",value:function(){return 0===this.props.station.num_docks_available?"red":1===this.props.station.num_docks_available?"orange":"green"}},{key:"render",value:function(){var t=this.props.station,a=t.rental_methods;return Object(O.jsxs)("ul",{className:"station__list__item",children:[Object(O.jsxs)("li",{className:"capacity",children:["Capacity: ",t.capacity," "]}),Object(O.jsxs)("li",{className:"station__header",children:[Object(O.jsx)("div",{className:"station__payment",children:Object(O.jsxs)("h2",{className:"station__info",children:[Object(O.jsxs)("div",{className:"label__data",children:[Object(O.jsx)("span",{className:"station__label",children:"Station"}),Object(O.jsx)("span",{className:"station__name",children:t.name})]}),Object(O.jsxs)("div",{className:"label__data",children:[Object(O.jsx)("span",{className:"station__label",children:"Address"}),Object(O.jsx)("span",{className:"station__address",children:t.address})]})]})}),Object(O.jsx)("p",{className:"payment__options",children:a.join(" / ")})]}),Object(O.jsxs)("li",{className:"availability",children:[Object(O.jsxs)("h3",{children:[Object(O.jsx)("span",{className:this.renderBikeClass(),children:t.num_bikes_available})," ",1===t.num_bikes_available?"Bike":"Bikes"]}),Object(O.jsxs)("h3",{children:[Object(O.jsx)("span",{className:this.renderDockClass(),children:t.num_docks_available})," ",1===t.num_docks_available?"Dock":"Docks"]})]})]})}}]),e}(s.Component),k=function(t){Object(f.a)(e,t);var a=Object(b.a)(e);function e(){var t;Object(p.a)(this,e);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=a.call.apply(a,[this].concat(s))).state={nameSort:[],capacitySort:[],sortByName:!0,sortByCapacity:!1,fetching:!1},t.onSortByNameClick=function(){t.setState({sortByName:!0,sortByCapacity:!1}),t.props.fetchStationInformation()},t.onSortByCapacityClick=function(){t.setState({sortByCapacity:!0,sortByName:!1})},t}return Object(d.a)(e,[{key:"componentDidMount",value:function(){this.props.fetchStationInformation(),this.props.fetchStationStatus(),0===this.props.stationInformation.length&&this.setState({fetching:!0})}},{key:"componentDidUpdate",value:function(){0!==this.props.stationInformation.length&&!0===this.state.fetching&&this.setState({fetching:!1})}},{key:"renderSortedByCapacity",value:function(){var t=this;this.props.stationInformation.sort((function(t,a){var e=t.capacity;return a.capacity-e}));for(var a=this.props.stationInformation.slice(0,50),e=function(e){t.props.stationStatus.forEach((function(t){if(t.station_id===a[e].station_id){var n=Object(h.a)(Object(h.a)({},a[e]),t);a[e]=n}}))},n=0;n<a.length;n++)e(n);return a.map((function(t){return Object(O.jsx)(S,{station:t},t.station_id)}))}},{key:"renderSortedByName",value:function(){var t=this;this.props.stationInformation.sort((function(t,a){var e=t.name.toLowerCase(),n=a.name.toLowerCase();return e<n?-1:e>n?1:0}));for(var a=this.props.stationInformation.slice(0,50),e=function(e){t.props.stationStatus.forEach((function(t){if(t.station_id===a[e].station_id){var n=Object(h.a)(Object(h.a)({},a[e]),t);a[e]=n}}))},n=0;n<a.length;n++)e(n);return a.map((function(t){return Object(O.jsx)(S,{station:t},t.station_id)}))}},{key:"render",value:function(){return Object(O.jsxs)("div",{className:"App__main",children:[Object(O.jsxs)("header",{className:"header__container",children:[Object(O.jsx)("h1",{className:"title",children:"Bike Stations"}),Object(O.jsxs)("div",{className:"sort__options",children:[Object(O.jsx)("button",{className:"sort__button",onClick:this.onSortByNameClick,children:"Sort by Name"}),Object(O.jsx)("button",{className:"sort__button",onClick:this.onSortByCapacityClick,children:"Sort by Capacity"})]})]}),Object(O.jsxs)("div",{className:"main__container",children:[this.state.fetching&&Object(O.jsx)("p",{children:"loading...."}),this.state.sortByName&&this.renderSortedByName(),this.state.sortByCapacity&&this.renderSortedByCapacity()]})]})}}]),e}(s.Component),x=Object(l.b)((function(t){return{stationInformation:t.stationInformation,stationStatus:t.stationStatus}}),{fetchStationInformation:function(){return function(){var t=Object(y.a)(j.a.mark((function t(a){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("https://tor.publicbikesystem.net/ube/gbfs/v1/en/station_information").then((function(t){return t.data.data.stations}));case 2:e=t.sent,a({type:n.fetchStationInformation,payload:e});case 4:case"end":return t.stop()}}),t)})));return function(a){return t.apply(this,arguments)}}()},fetchStationStatus:function(){return function(){var t=Object(y.a)(j.a.mark((function t(a){var e;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.get("https://tor.publicbikesystem.net/ube/gbfs/v1/en/station_status").then((function(t){return t.data.data.stations}));case 2:e=t.sent,a({type:n.fetchStationStatus,payload:e});case 4:case"end":return t.stop()}}),t)})));return function(a){return t.apply(this,arguments)}}()}})(k),N=Object(r.combineReducers)({stationInformation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;switch(a.type){case n.fetchStationInformation:return a.payload;default:return t}},stationStatus:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;switch(a.type){case n.fetchStationStatus:return a.payload;default:return t}}}),g=(e(62),Object(r.createStore)(N,Object(c.composeWithDevTools)(Object(r.applyMiddleware)(u.a))));o.a.render(Object(O.jsx)(l.a,{store:g,children:Object(O.jsx)(x,{})}),document.querySelector("#root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.df942b6d.chunk.js.map