(this["webpackJsonpbike-stations-challenge"]=this["webpackJsonpbike-stations-challenge"]||[]).push([[0],{17:function(t,n,a){},61:function(t,n,a){},62:function(t,n,a){"use strict";a.r(n);var e,s=a(0),i=a(6),o=a.n(i),r=a(3),c=a(11),l=a(28),u=a(5),h=a(7),p=a(8),f=a(13),d=a(12),b=(a(17),a(4)),m=a.n(b),j=a(9),y=a(10),_=a.n(y);!function(t){t[t.fetchStationInformation=0]="fetchStationInformation",t[t.fetchStationStatus=1]="fetchStationStatus"}(e||(e={}));var v=a(1),O=function(t){Object(f.a)(a,t);var n=Object(d.a)(a);function a(){return Object(h.a)(this,a),n.apply(this,arguments)}return Object(p.a)(a,[{key:"renderBikeClass",value:function(){return 0===this.props.station.num_bikes_available?"red":1===this.props.station.num_bikes_available?"orange":"green"}},{key:"renderDockClass",value:function(){return 0===this.props.station.num_docks_available?"red":1===this.props.station.num_docks_available?"orange":"green"}},{key:"render",value:function(){var t=this.props.station,n=t.rental_methods;return Object(v.jsxs)("ul",{className:"station__list__item",children:[Object(v.jsxs)("li",{children:["Capacity: ",t.capacity]}),Object(v.jsx)("li",{className:"station__header",children:Object(v.jsxs)("h2",{className:"station__info",children:[Object(v.jsx)("span",{className:"station__label",children:"Station"}),Object(v.jsx)("span",{className:"station__name",children:t.name}),Object(v.jsx)("span",{className:"station__label",children:"Address"}),Object(v.jsx)("span",{className:"station__address",children:t.address})]})}),Object(v.jsxs)("li",{className:"availability",children:[Object(v.jsxs)("h3",{children:[Object(v.jsx)("span",{className:this.renderBikeClass(),children:t.num_bikes_available})," ",1===t.num_bikes_available?"Bike":"Bikes"]}),Object(v.jsxs)("h3",{children:[Object(v.jsx)("span",{className:this.renderDockClass(),children:t.num_docks_available})," ",1===t.num_docks_available?"Dock":"Docks"]})]}),Object(v.jsx)("li",{className:"rental__methods",children:Object(v.jsx)("p",{className:"payment__options",children:n.join(" / ")})})]})}}]),a}(s.Component),S=function(t){Object(f.a)(a,t);var n=Object(d.a)(a);function a(){var t;Object(h.a)(this,a);for(var e=arguments.length,s=new Array(e),i=0;i<e;i++)s[i]=arguments[i];return(t=n.call.apply(n,[this].concat(s))).state={nameSort:[],capacitySort:[],sortByName:!0,sortByCapacity:!1,fetching:!1},t.onSortByNameClick=function(){t.setState({sortByName:!0,sortByCapacity:!1}),t.props.fetchStationInformation()},t.onSortByCapacityClick=function(){t.setState({sortByCapacity:!0,sortByName:!1})},t}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchStationInformation(),this.props.fetchStationStatus(),0===this.props.stationInformation.length&&this.setState({fetching:!0})}},{key:"componentDidUpdate",value:function(){0!==this.props.stationInformation.length&&!0===this.state.fetching&&this.setState({fetching:!1})}},{key:"renderSortedByCapacity",value:function(){var t=this;this.props.stationInformation.sort((function(t,n){var a=t.capacity;return n.capacity-a}));for(var n=this.props.stationInformation.slice(0,50),a=function(a){t.props.stationStatus.forEach((function(t){if(t.station_id===n[a].station_id){var e=Object(u.a)(Object(u.a)({},n[a]),t);n[a]=e}}))},e=0;e<n.length;e++)a(e);return n.map((function(t){return Object(v.jsx)(O,{station:t},t.station_id)}))}},{key:"renderSortedByName",value:function(){var t=this;this.props.stationInformation.sort((function(t,n){var a=t.name.toLowerCase(),e=n.name.toLowerCase();return a<e?-1:a>e?1:0}));for(var n=this.props.stationInformation.slice(0,50),a=function(a){t.props.stationStatus.forEach((function(t){if(t.station_id===n[a].station_id){var e=Object(u.a)(Object(u.a)({},n[a]),t);n[a]=e}}))},e=0;e<n.length;e++)a(e);return n.map((function(t){return Object(v.jsx)(O,{station:t},t.station_id)}))}},{key:"render",value:function(){return Object(v.jsxs)("div",{className:"App__main",children:[Object(v.jsxs)("div",{className:"sort__options",children:[Object(v.jsx)("button",{className:"sort__button",onClick:this.onSortByNameClick,children:"Sort by Name"}),Object(v.jsx)("button",{className:"sort__button",onClick:this.onSortByCapacityClick,children:"Sort by Capacity"})]}),Object(v.jsxs)("div",{className:"main__container",children:[this.state.fetching&&Object(v.jsx)("p",{children:"loading...."}),this.state.sortByName&&this.renderSortedByName(),this.state.sortByCapacity&&this.renderSortedByCapacity()]})]})}}]),a}(s.Component),k=Object(c.b)((function(t){return{stationInformation:t.stationInformation,stationStatus:t.stationStatus}}),{fetchStationInformation:function(){return function(){var t=Object(j.a)(m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.a.get("https://tor.publicbikesystem.net/ube/gbfs/v1/en/station_information").then((function(t){return t.data.data.stations}));case 2:a=t.sent,n({type:e.fetchStationInformation,payload:a});case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()},fetchStationStatus:function(){return function(){var t=Object(j.a)(m.a.mark((function t(n){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.a.get("https://tor.publicbikesystem.net/ube/gbfs/v1/en/station_status").then((function(t){return t.data.data.stations}));case 2:a=t.sent,n({type:e.fetchStationStatus,payload:a});case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}()}})(S),x=Object(r.c)({stationInformation:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case e.fetchStationInformation:return n.payload;default:return t}},stationStatus:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;switch(n.type){case e.fetchStationStatus:return n.payload;default:return t}}}),N=(a(61),Object(r.d)(x,Object(r.a)(l.a)));o.a.render(Object(v.jsx)(c.a,{store:N,children:Object(v.jsx)(k,{})}),document.querySelector("#root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.659ff462.chunk.js.map